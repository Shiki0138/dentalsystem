# ✅ デプロイメント必須チェックリスト

**作成日**: 2025-06-30  
**更新者**: worker3  
**適用対象**: 全開発者（PRESIDENT, boss1, workers）

---

## 🚨 【必須遵守】デプロイ前チェック項目

### 1. ローカル本番ビルドテスト
```bash
# 必須実行コマンド
RAILS_ENV=production bundle exec rails assets:precompile

# 確認事項
- エラーなく完了すること
- アセットファイルが生成されること
- 警告メッセージがないこと
```

### 2. 環境変数チェック
```bash
# 必須実行コマンド
bundle exec rails deployment:check_env

# 確認事項
- 全ての必須環境変数が設定済み
- SECRET_KEY_BASEが安全な値
- DATABASE_URLが正しい形式
```

### 3. データベース接続テスト
```bash
# 必須実行コマンド
RAILS_ENV=production bundle exec rails db:version

# 確認事項
- データベースに接続できること
- マイグレーションが最新状態
- 接続エラーがないこと
```

### 4. 包括的デプロイチェック
```bash
# 必須実行コマンド
bundle exec rails deployment:check

# 確認事項
- 5/5チェック全て通過
- 失敗項目があれば修正必須
```

---

## 🚨 開発ルール違反事項

以下の行為は**開発ルール違反**として扱われます：

1. **上記4項目の未実施**
2. **チェック失敗状態でのデプロイ強行**
3. **エラー発生の未報告**
4. **ガイドラインの無視**

---

## 📋 worker3の遵守宣言

### 今後の全開発作業において：
- ✅ ローカル本番ビルドテストの必須実行
- ✅ 環境変数チェックの必須実行  
- ✅ データベース接続テストの必須実行
- ✅ エラー発生時の即座報告
- ✅ deployment_error_prevention.md完全遵守

### 責任範囲：
- 自身の作業でのチェックリスト完全実行
- エラー検出時のPRESIDENT/boss1への即時報告
- チーム全体への遵守体制維持協力

---

## 🛡️ エラー防止メカニズム

### 段階的チェック
1. **開発時**: 随時ローカルテスト
2. **コミット前**: 全チェック実行
3. **デプロイ前**: 最終確認
4. **デプロイ後**: ヘルスチェック

### 自動化ツール活用
- `rails deployment:check` - 包括チェック
- `rails deployment:check_env` - 環境変数確認
- `rails deployment:health_check` - 稼働確認

---

## 📞 エラー報告フロー

### 1. エラー検出時
```
即座に以下を実行:
1. エラーログの保存
2. 再現手順の記録
3. PRESIDENT/boss1への報告
4. 作業停止（修正まで）
```

### 2. 報告内容
- エラーの種類と詳細
- 発生したタイミング
- 実行していた作業
- 環境情報（Ruby, Rails, OS等）

---

## 🔄 継続的改善

### 定期レビュー
- チェックリストの有効性確認
- 新しいエラーパターンの追加
- 自動化の改善

### チーム共有
- エラー事例の共有
- 解決策の文書化
- ベストプラクティスの更新

---

**重要**: このチェックリストは**生きた文書**です。新しい問題や解決策を発見した場合は、即座に更新してチーム全体で共有してください。