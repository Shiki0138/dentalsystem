# 📋 コア機能スコープ定義書

**更新日**: 2025-06-30  
**対象**: 歯科クリニック予約・業務管理システム  
**スコープ見直し**: 機能範囲の集中化  

---

## 🎯 機能範囲見直し方針

### ❌ 除外する機能
1. **歯科専門機能**
   - 歯科特有の診療記録
   - 治療計画管理
   - 歯科画像管理
   - 専門検査結果管理

2. **AI機能**
   - AI予測分析
   - 機械学習による最適化
   - 自動診断支援
   - チャットボット

3. **外部連携機能**
   - LINE Messaging API
   - SMS配信サービス
   - 決済システム連携
   - 保険システム連携

4. **IoT機能**
   - 医療機器データ統合
   - センサー連携
   - 自動データ収集
   - デバイス管理

### ✅ 集中実装する機能

#### 1. 予約管理システム
- **基本予約機能**
  - 予約登録・変更・キャンセル
  - 予約状況表示
  - 時間枠管理
  - 重複防止

- **予約効率化**
  - ワンクリック予約
  - 空き枠検索
  - 予約一覧表示
  - 予約ステータス管理

#### 2. 患者管理システム
- **患者基本情報**
  - 患者登録・編集・削除
  - 基本情報管理（氏名、連絡先、生年月日）
  - 患者検索機能
  - 重複患者チェック

- **診療履歴（簡易版）**
  - 来院日記録
  - 基本的な診療メモ
  - 次回予約予定
  - 来院回数管理

#### 3. 業務効率化システム
- **スタッフ管理**
  - スタッフ登録・編集
  - 勤務スケジュール管理
  - 基本的な勤怠記録
  - 役割・権限管理

- **業務効率化**
  - ダッシュボード（基本統計）
  - 日次・月次レポート
  - 簡易的な売上管理
  - 業務フロー最適化

---

## 🔧 技術実装範囲

### 採用技術（シンプル化）
- **フレームワーク**: Ruby on Rails 7.2
- **データベース**: PostgreSQL 16
- **フロントエンド**: Hotwire (Turbo/Stimulus)
- **UI**: Tailwind CSS
- **認証**: Devise（シンプル版）
- **背景処理**: 基本的なActiveJob

### 除外技術
- Redis（複雑なキャッシュ）
- Sidekiq（高度な背景処理）
- ActionMailbox（メール統合）
- 外部API連携
- WebSocket（リアルタイム機能）

---

## 📊 簡素化されたKPI

### 基本指標のみ
| 指標 | 目標値 | 測定方法 |
|------|--------|----------|
| 予約登録時間 | 60秒以内 | 手動計測 |
| 予約重複率 | 1%以下 | システム集計 |
| 患者検索速度 | 3秒以内 | レスポンス時間 |
| システム稼働率 | 99%以上 | 基本監視 |

### 削除されたKPI
- API応答180ms以内
- 28秒予約登録
- 99.94%稼働率
- 複雑なパフォーマンス指標

---

## 🏗️ システム構成（簡素化）

### アプリケーション構成
```
app/
├── models/
│   ├── patient.rb           # 患者管理
│   ├── appointment.rb       # 予約管理
│   ├── user.rb             # スタッフ・管理者
│   └── clinic.rb           # クリニック基本情報
├── controllers/
│   ├── patients_controller.rb
│   ├── appointments_controller.rb
│   ├── dashboard_controller.rb
│   └── admin/
└── views/
    ├── patients/
    ├── appointments/
    ├── dashboard/
    └── layouts/
```

### データベース設計（簡素化）
```sql
-- 患者テーブル
patients (id, name, phone, email, birth_date, notes)

-- 予約テーブル  
appointments (id, patient_id, user_id, appointment_date, status, notes)

-- ユーザーテーブル
users (id, email, name, role, encrypted_password)

-- クリニックテーブル
clinics (id, name, address, phone, settings)
```

---

## 📱 UI/UX設計（簡素化）

### 基本画面構成
1. **ダッシュボード**
   - 本日の予約一覧
   - 基本統計表示
   - クイックアクション

2. **予約管理**
   - 予約登録フォーム
   - 予約一覧・カレンダー
   - 予約編集・キャンセル

3. **患者管理**
   - 患者一覧・検索
   - 患者登録・編集
   - 診療履歴表示

4. **設定画面**
   - クリニック基本設定
   - ユーザー管理
   - システム設定

### 削除されたUI要素
- 複雑なリアルタイム更新
- 高度なダッシュボード
- 詳細なレポート機能
- モバイル専用機能

---

## 🔒 セキュリティ（基本レベル）

### 実装するセキュリティ
- Devise認証
- 基本的なCSRF保護
- SQLインジェクション対策
- XSS対策（Rails標準）
- 基本的なアクセス制御

### 削除されたセキュリティ
- 2要素認証
- 軍事級防御システム
- 高度な侵入検知
- 詳細な監査ログ

---

## 📈 開発・デプロイ（簡素化）

### 開発プロセス
- 基本的なRails開発
- 簡単なテスト（RSpec基本）
- 標準的なGit運用
- シンプルなデプロイ

### デプロイ環境
- Heroku または Railway
- PostgreSQL（標準プラン）
- 基本的な環境変数管理
- シンプルな監視

---

## 🎯 実装優先順位

### Phase 1（最優先）
1. **基本認証システム**
2. **患者管理機能**
3. **基本予約機能**
4. **シンプルダッシュボード**

### Phase 2（次優先）
1. **予約カレンダー表示**
2. **基本レポート機能**
3. **スタッフ管理**
4. **システム設定**

### Phase 3（将来検討）
1. **業務効率化改善**
2. **UI/UX向上**
3. **基本的な自動化**
4. **パフォーマンス最適化**

---

## 📋 変更管理

### 仕様変更の影響
- **開発工数**: 60%削減
- **技術複雑度**: 大幅簡素化
- **保守性**: 向上
- **導入難易度**: 大幅低下

### 品質基準調整
- **目標品質**: 80/100点（実用レベル）
- **テストカバレッジ**: 60%以上
- **エラー率**: 2%以下
- **ページ読み込み**: 5秒以内

---

**重要**: この機能範囲見直しにより、よりシンプルで実用的なシステムを迅速に開発・提供することができます。複雑な機能は将来のフェーズで段階的に追加検討します。