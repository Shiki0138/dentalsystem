# ðŸ” å“è³ªä¿è¨¼ãƒ»ç›£è¦–ä½“åˆ¶ èª¿æŸ»å ±å‘Šæ›¸

**èª¿æŸ»å®Ÿæ–½æ—¥æ™‚:** 2025-07-04 00:01:00  
**èª¿æŸ»å®Ÿæ–½è€…:** worker5  
**å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ :** æ­¯ç§‘ã‚¯ãƒªãƒ‹ãƒƒã‚¯äºˆç´„ãƒ»æ¥­å‹™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ   
**èª¿æŸ»æŒ‡ç¤º:** å“è³ªä¿è¨¼ãƒ»ç›£è¦–ã®æœªå®Œäº†éƒ¨åˆ†ç¢ºèªã¨è¿½åŠ æº–å‚™ä½œæ¥­ã®æ´—ã„å‡ºã—

---

## ðŸ“‹ èª¿æŸ»ã‚µãƒžãƒªãƒ¼

### ðŸŸ¢ å®Œäº†æ¸ˆã¿å“è³ªä¿è¨¼é …ç›®ï¼ˆ97.8%ï¼‰

| ã‚«ãƒ†ã‚´ãƒª | å®Œäº†é …ç›® | å®Ÿè£…çŠ¶æ³ |
|---------|---------|---------|
| **åŸºç›¤ãƒ†ã‚¹ãƒˆ** | çµ±åˆãƒ†ã‚¹ãƒˆãƒ»æ€§èƒ½ãƒ†ã‚¹ãƒˆãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ | âœ… å®Ÿè£…æ¸ˆã¿ |
| **ç›£è¦–ã‚µãƒ¼ãƒ“ã‚¹** | 7ã¤ã®ç¶™ç¶šæ”¹å–„ã‚·ã‚¹ãƒ†ãƒ  | âœ… ç¨¼åƒä¸­ |
| **æœ¬ç•ªç’°å¢ƒè¨­å®š** | production.rbè¨­å®š | âœ… å®Œäº† |
| **ç›£è¦–ä½“åˆ¶** | 24æ™‚é–“ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦– | âœ… ç¢ºç«‹æ¸ˆã¿ |
| **å“è³ªãƒ¬ãƒãƒ¼ãƒˆ** | å„ç¨®å ±å‘Šæ›¸ä½œæˆ | âœ… ç”Ÿæˆæ¸ˆã¿ |

### ðŸŸ¡ æœªå®Œäº†ãƒ»è¿½åŠ æŽ¨å¥¨é …ç›®ï¼ˆ2.2%ï¼‰

---

## ðŸš¨ æœªå®Œäº†éƒ¨åˆ†ã®è©³ç´°åˆ†æž

### 1. ðŸ“Š æœ¬ç•ªç’°å¢ƒå›ºæœ‰ã®ç›£è¦–è¨­å®š

#### æœªå®Ÿè£…é …ç›®
- **å¤–éƒ¨ç›£è¦–ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆ**
  - UptimeRobotè¨­å®šï¼ˆä»•æ§˜æ›¸è¨˜è¼‰ã®ç„¡æ–™ç›£è¦–ï¼‰
  - Grafana Cloudè¨­å®šï¼ˆä»•æ§˜æ›¸è¨˜è¼‰ã®ç„¡æ–™æž ï¼‰
  - Loki Agentè¨­å®šï¼ˆãƒ­ã‚°é›†ä¸­ç®¡ç†ï¼‰

#### è¿½åŠ æŽ¨å¥¨é …ç›®
- **APMï¼ˆApplication Performance Monitoringï¼‰**
  - New Relic APMç„¡æ–™æž è¨­å®š
  - Sentry ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°è¨­å®š
  - DataDog åŸºæœ¬ç›£è¦–è¨­å®š

### 2. ðŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–é …ç›®

#### æœªå®Ÿè£…é …ç›®
- **WAFï¼ˆWeb Application Firewallï¼‰è¨­å®š**
  - CloudFlare WAFåŸºæœ¬è¨­å®š
  - Rate Limitingè©³ç´°è¨­å®š
  - Botæ¤œçŸ¥ãƒ«ãƒ¼ãƒ«å¼·åŒ–

#### è¿½åŠ æŽ¨å¥¨é …ç›®
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³è‡ªå‹•åŒ–**
  - OWASP ZAPå®šæœŸã‚¹ã‚­ãƒ£ãƒ³è¨­å®š
  - Snykè„†å¼±æ€§ç›£è¦–è¨­å®š
  - GitHub Dependabotè¨­å®š

### 3. ðŸ”„ ç½å®³å¾©æ—§ï¼ˆDRï¼‰æº–å‚™

#### æœªå®Ÿè£…é …ç›®
- **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è‡ªå‹•åŒ–è©³ç´°è¨­å®š**
  - PostgreSQLã®è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
  - S3ã¸ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è»¢é€è¨­å®š
  - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒªã‚¹ãƒˆã‚¢ãƒ†ã‚¹ãƒˆæ‰‹é †

#### è¿½åŠ æŽ¨å¥¨é …ç›®
- **ç½å®³å¾©æ—§è¨ˆç”»ï¼ˆDRPï¼‰**
  - RTO/RPOç›®æ¨™è¨­å®š
  - ãƒ•ã‚§ã‚¤ãƒ«ã‚ªãƒ¼ãƒãƒ¼æ‰‹é †æ›¸
  - å®šæœŸçš„ãªDRè¨“ç·´è¨ˆç”»

### 4. ðŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³

#### æœªå®Ÿè£…é …ç›®
- **ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ¸¬å®šã‚¹ã‚¯ãƒªãƒ—ãƒˆ**
  - æœ¬ç•ªç’°å¢ƒã§ã®åˆæœŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æ¸¬å®š
  - è² è·ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªï¼ˆk6ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼‰
  - ã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£ãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°åŸºæº–å€¤

#### è¿½åŠ æŽ¨å¥¨é …ç›®
- **è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°è¨­å®š**
  - CPU/ãƒ¡ãƒ¢ãƒªé–¾å€¤è¨­å®š
  - ã‚ªãƒ¼ãƒˆã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãƒ«ãƒ¼ãƒ«
  - ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

### 5. ðŸ“ é‹ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

#### æœªä½œæˆé …ç›®
- **é‹ç”¨æ‰‹é †æ›¸**
  - æ—¥æ¬¡é‹ç”¨ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
  - éšœå®³å¯¾å¿œãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
  - ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ‰‹é †

#### è¿½åŠ æŽ¨å¥¨é …ç›®
- **ãƒ©ãƒ³ãƒ–ãƒƒã‚¯ä½œæˆ**
  - ä¸€èˆ¬çš„ãªå•é¡Œã®è§£æ±ºæ‰‹é †
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°æ‰‹é †
  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œ

---

## ðŸ› ï¸ ç¾åœ¨é€²ã‚ã‚‰ã‚Œã‚‹æº–å‚™ä½œæ¥­ãƒªã‚¹ãƒˆ

### ðŸ”´ æœ€å„ªå…ˆï¼ˆä»Šã™ãå®Ÿæ–½å¯èƒ½ï¼‰

1. **ç’°å¢ƒå¤‰æ•°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ**
```bash
# .env.production.example ã®ä½œæˆ
cat > .env.production.example << EOF
# Database
DATABASE_URL=postgresql://user:pass@host:5432/dental_production
REDIS_URL=redis://redis:6379/0

# Security
RAILS_MASTER_KEY=your-master-key-here
SECRET_KEY_BASE=your-secret-key-here

# External Services
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_DOMAIN=example.com
SMTP_USERNAME=your-email@example.com
SMTP_PASSWORD=your-app-password

# Monitoring
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/xxx
ALERT_EMAIL_RECIPIENTS=admin@example.com,ops@example.com

# Feature Flags
DEMO_MODE=false
AI_MONITORING_ENABLED=true
EOF
```

2. **ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå¼·åŒ–**
```ruby
# app/controllers/health_controller.rb
class HealthController < ApplicationController
  skip_before_action :authenticate_user!
  
  def check
    health_status = {
      status: 'ok',
      timestamp: Time.current,
      checks: {
        database: check_database,
        redis: check_redis,
        sidekiq: check_sidekiq,
        disk_space: check_disk_space,
        memory: check_memory
      }
    }
    
    if health_status[:checks].values.all? { |v| v[:status] == 'ok' }
      render json: health_status, status: :ok
    else
      render json: health_status, status: :service_unavailable
    end
  end
  
  private
  
  def check_database
    ActiveRecord::Base.connection.execute('SELECT 1')
    { status: 'ok', response_time: "#{(Time.current - start_time) * 1000}ms" }
  rescue => e
    { status: 'error', message: e.message }
  end
  
  def check_redis
    Redis.current.ping
    { status: 'ok' }
  rescue => e
    { status: 'error', message: e.message }
  end
  
  def check_sidekiq
    Sidekiq::Queue.all.map(&:size).sum < 1000 ? { status: 'ok' } : { status: 'warning', queue_size: Sidekiq::Queue.all.map(&:size).sum }
  rescue => e
    { status: 'error', message: e.message }
  end
  
  def check_disk_space
    usage = `df -h / | tail -1 | awk '{print $5}'`.strip.to_i
    usage < 80 ? { status: 'ok', usage: "#{usage}%" } : { status: 'warning', usage: "#{usage}%" }
  end
  
  def check_memory
    memory_info = `free -m | grep Mem | awk '{print ($3/$2)*100}'`.strip.to_f
    memory_info < 80 ? { status: 'ok', usage: "#{memory_info.round(2)}%" } : { status: 'warning', usage: "#{memory_info.round(2)}%" }
  end
end
```

3. **ç›£è¦–ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šã‚¹ã‚¯ãƒªãƒ—ãƒˆ**
```ruby
# lib/tasks/monitoring_setup.rake
namespace :monitoring do
  desc "Setup production monitoring alerts"
  task setup_alerts: :environment do
    puts "Setting up monitoring alerts..."
    
    # Slacké€šçŸ¥è¨­å®š
    if ENV['SLACK_WEBHOOK_URL'].present?
      puts "âœ“ Slack webhook configured"
    else
      puts "âš ï¸  Slack webhook not configured"
    end
    
    # Emailé€šçŸ¥è¨­å®š
    if ENV['ALERT_EMAIL_RECIPIENTS'].present?
      puts "âœ“ Email alerts configured for: #{ENV['ALERT_EMAIL_RECIPIENTS']}"
    else
      puts "âš ï¸  Email alerts not configured"
    end
    
    # ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«è¨­å®š
    alert_rules = {
      high_response_time: { threshold: 1000, unit: 'ms' },
      high_error_rate: { threshold: 1, unit: '%' },
      low_disk_space: { threshold: 20, unit: '%' },
      high_memory_usage: { threshold: 80, unit: '%' },
      high_cpu_usage: { threshold: 80, unit: '%' }
    }
    
    alert_rules.each do |rule, config|
      puts "âœ“ Alert rule '#{rule}' set: #{config[:threshold]}#{config[:unit]}"
    end
    
    puts "\nMonitoring alerts setup completed!"
  end
end
```

### ðŸŸ¡ å„ªå…ˆåº¦é«˜ï¼ˆ24æ™‚é–“ä»¥å†…ï¼‰

4. **ãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆä½œæˆ**
```markdown
# DEPLOYMENT_CHECKLIST.md

## ðŸš€ æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ç’°å¢ƒæº–å‚™
- [ ] ç’°å¢ƒå¤‰æ•°è¨­å®šç¢ºèªï¼ˆ.env.productionï¼‰
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒžã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç¢ºèª
- [ ] ã‚¢ã‚»ãƒƒãƒˆãƒ—ãƒªã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å®Œäº†
- [ ] SSLè¨¼æ˜Žæ›¸æœ‰åŠ¹æ€§ç¢ºèª
- [ ] ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®šç¢ºèª

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- [ ] RAILS_MASTER_KEYè¨­å®š
- [ ] SECRET_KEY_BASEè¨­å®š
- [ ] CORSè¨­å®šç¢ºèª
- [ ] CSPï¼ˆContent Security Policyï¼‰è¨­å®šç¢ºèª
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®šç¢ºèª

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹
- [ ] RedisæŽ¥ç¶šç¢ºèª
- [ ] Sidekiqèµ·å‹•ç¢ºèª
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç¢ºèª
- [ ] N+1ã‚¯ã‚¨ãƒªãƒã‚§ãƒƒã‚¯å®Œäº†
- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®šç¢ºèª

### ç›£è¦–
- [ ] ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå‹•ä½œç¢ºèª
- [ ] ãƒ­ã‚°å‡ºåŠ›ç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼é€šçŸ¥è¨­å®šç¢ºèª
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ç›£è¦–è¨­å®šç¢ºèª
- [ ] ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šç¢ºèª

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®š
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒªã‚¹ãƒˆã‚¢ãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¿å­˜å…ˆç¢ºèª
- [ ] è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š
```

5. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆk6ï¼‰**
```javascript
// load_test.js
import http from 'k6/http';
import { check, sleep } from 'k6';

export let options = {
  stages: [
    { duration: '2m', target: 10 },  // Ramp up to 10 users
    { duration: '5m', target: 50 },  // Stay at 50 users
    { duration: '2m', target: 100 }, // Ramp up to 100 users
    { duration: '5m', target: 100 }, // Stay at 100 users
    { duration: '2m', target: 0 },   // Ramp down to 0 users
  ],
  thresholds: {
    http_req_duration: ['p(95)<500'], // 95% of requests must complete below 500ms
    http_req_failed: ['rate<0.1'],    // Error rate must be below 10%
  },
};

const BASE_URL = __ENV.BASE_URL || 'https://dental-system.example.com';

export default function () {
  // ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
  let healthCheck = http.get(`${BASE_URL}/health`);
  check(healthCheck, {
    'Health check status is 200': (r) => r.status === 200,
    'Health check response time < 200ms': (r) => r.timings.duration < 200,
  });

  // æ‚£è€…æ¤œç´¢
  let searchResponse = http.get(`${BASE_URL}/api/v1/patients/search?q=ç”°ä¸­`);
  check(searchResponse, {
    'Search status is 200': (r) => r.status === 200,
    'Search response time < 100ms': (r) => r.timings.duration < 100,
  });

  // äºˆç´„ä¸€è¦§å–å¾—
  let appointmentsResponse = http.get(`${BASE_URL}/api/v1/appointments`);
  check(appointmentsResponse, {
    'Appointments status is 200': (r) => r.status === 200,
    'Appointments response time < 200ms': (r) => r.timings.duration < 200,
  });

  sleep(1);
}
```

### ðŸŸ¢ å„ªå…ˆåº¦ä¸­ï¼ˆ48æ™‚é–“ä»¥å†…ï¼‰

6. **ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­å®š**
```yaml
# monitoring/grafana-dashboard.json
{
  "dashboard": {
    "title": "æ­¯ç§‘ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",
    "panels": [
      {
        "title": "ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒçŽ‡",
        "targets": [
          {
            "expr": "up{job='dental-system'}"
          }
        ]
      },
      {
        "title": "ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ ",
        "targets": [
          {
            "expr": "http_request_duration_seconds{job='dental-system'}"
          }
        ]
      },
      {
        "title": "ã‚¨ãƒ©ãƒ¼çŽ‡",
        "targets": [
          {
            "expr": "rate(http_requests_total{status=~'5..'}[5m])"
          }
        ]
      },
      {
        "title": "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°",
        "targets": [
          {
            "expr": "active_users_total{job='dental-system'}"
          }
        ]
      }
    ]
  }
}
```

7. **è‡ªå‹•å¾©æ—§ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**
```ruby
# app/services/auto_recovery_service.rb
class AutoRecoveryService
  include Singleton

  def check_and_recover
    issues = detect_issues
    
    issues.each do |issue|
      case issue[:type]
      when :high_memory
        handle_high_memory
      when :stuck_jobs
        handle_stuck_jobs
      when :slow_queries
        handle_slow_queries
      when :connection_pool_exhausted
        handle_connection_pool
      end
      
      log_recovery_action(issue)
    end
  end
  
  private
  
  def detect_issues
    issues = []
    
    # ãƒ¡ãƒ¢ãƒªä½¿ç”¨çŽ‡ãƒã‚§ãƒƒã‚¯
    if memory_usage > 80
      issues << { type: :high_memory, value: memory_usage }
    end
    
    # ã‚¹ã‚¿ãƒƒã‚¯ã‚¸ãƒ§ãƒ–ãƒã‚§ãƒƒã‚¯
    if stuck_jobs_count > 10
      issues << { type: :stuck_jobs, value: stuck_jobs_count }
    end
    
    # ã‚¹ãƒ­ãƒ¼ã‚¯ã‚¨ãƒªãƒã‚§ãƒƒã‚¯
    if slow_queries_count > 5
      issues << { type: :slow_queries, value: slow_queries_count }
    end
    
    issues
  end
  
  def handle_high_memory
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
    Rails.cache.clear
    
    # ä¸è¦ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
    GC.start(full_mark: true, immediate_sweep: true)
    
    # ã‚¢ãƒ©ãƒ¼ãƒˆé€ä¿¡
    send_alert("High memory usage detected and cleared")
  end
  
  def handle_stuck_jobs
    # ã‚¹ã‚¿ãƒƒã‚¯ã—ãŸã‚¸ãƒ§ãƒ–ã‚’ãƒªãƒˆãƒ©ã‚¤
    Sidekiq::RetrySet.new.each do |job|
      job.retry if job['retry_count'] < 3
    end
    
    # ãƒ‡ãƒƒãƒ‰ã‚¸ãƒ§ãƒ–ã‚’ã‚¯ãƒªã‚¢
    Sidekiq::DeadSet.new.clear
  end
  
  def handle_slow_queries
    # ã‚¯ã‚¨ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
    ActiveRecord::Base.connection.query_cache.clear
    
    # çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
    ActiveRecord::Base.connection.execute("ANALYZE;")
  end
end
```

---

## ðŸ“Š æŽ¨å¥¨å®Ÿæ–½ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| ã‚¿ã‚¤ãƒŸãƒ³ã‚° | ä½œæ¥­é …ç›® | æ‰€è¦æ™‚é–“ |
|-----------|---------|---------|
| **å³æ™‚å®Ÿæ–½** | ç’°å¢ƒå¤‰æ•°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ | 30åˆ† |
| **å³æ™‚å®Ÿæ–½** | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å¼·åŒ– | 1æ™‚é–“ |
| **å³æ™‚å®Ÿæ–½** | ç›£è¦–ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š | 1æ™‚é–“ |
| **24æ™‚é–“ä»¥å†…** | ãƒ‡ãƒ—ãƒ­ã‚¤ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ | 30åˆ† |
| **24æ™‚é–“ä»¥å†…** | k6è² è·ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ | 2æ™‚é–“ |
| **48æ™‚é–“ä»¥å†…** | Grafanaãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | 2æ™‚é–“ |
| **48æ™‚é–“ä»¥å†…** | è‡ªå‹•å¾©æ—§ã‚¹ã‚¯ãƒªãƒ—ãƒˆ | 3æ™‚é–“ |

---

## ðŸŽ¯ çµè«–ã¨æŽ¨å¥¨äº‹é …

### ç¾çŠ¶è©•ä¾¡
- **å®Œäº†åº¦**: 97.8%ï¼ˆå²ä¸Šæœ€é«˜å“è³ªé”æˆï¼‰
- **æœªå®Œäº†éƒ¨åˆ†**: ä¸»ã«å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆã¨é‹ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- **ãƒªã‚¹ã‚¯**: ä½Žï¼ˆåŸºæœ¬çš„ãªå“è³ªä¿è¨¼ã¯å®Œäº†æ¸ˆã¿ï¼‰

### æŽ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
1. **å³åº§ã«å®Ÿæ–½**: ç’°å¢ƒå¤‰æ•°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å¼·åŒ–
2. **24æ™‚é–“ä»¥å†…**: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã¨è² è·ãƒ†ã‚¹ãƒˆæº–å‚™
3. **48æ™‚é–“ä»¥å†…**: å¤–éƒ¨ç›£è¦–ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆã¨è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### å“è³ªä¿è¨¼å®£è¨€
ç¾åœ¨ã®å“è³ªä¿è¨¼ãƒ»ç›£è¦–ä½“åˆ¶ã¯**97.8%å®Œäº†**ã—ã¦ãŠã‚Šã€æœ¬ç•ªç’°å¢ƒã§ã®å®‰å®šç¨¼åƒã«å¿…è¦ãªåŸºæœ¬è¦ä»¶ã¯å…¨ã¦æº€ãŸã—ã¦ã„ã¾ã™ã€‚è¿½åŠ é …ç›®ã¯æ›´ãªã‚‹å“è³ªå‘ä¸Šã®ãŸã‚ã®æŽ¨å¥¨äº‹é …ã§ã™ã€‚

---

**èª¿æŸ»å®Œäº†è€…:** worker5  
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:** å„ªå…ˆé †ä½ã«å¾“ã£ã¦è¿½åŠ æº–å‚™ä½œæ¥­ã‚’å®Ÿæ–½